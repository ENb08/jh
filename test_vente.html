<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Test API Vente</title>
</head>
<body>
    <h1>Test API createVente.php</h1>
    <button onclick="testVente()">Tester la vente</button>
    <pre id="result"></pre>

    <script>
    async function testVente() {
        const data = {
            items: [
                {id: 1, qty: 2, price_cdf: 1000, price_usd: 0.5},
                {id: 2, qty: 1, price_cdf: 2000, price_usd: 1}
            ],
            payment_mode: 'cash',
            currency: 'CDF',
            discount: 0,
            amount_received: 5000,
            taux_usd: 2400
        };
        
        try {
            const response = await fetch('assets/Api/createVente.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            
            const result = await response.json();
            document.getElementById('result').textContent = JSON.stringify(result, null, 2);
            
            if (result.success) {
                alert('✅ ' + result.message);
            } else {
                alert('❌ ' + result.message);
            }
        } catch (error) {
            document.getElementById('result').textContent = 'Erreur: ' + error.message;
            alert('❌ Erreur: ' + error.message);
        }
    }
    </script>
</body>
</html>